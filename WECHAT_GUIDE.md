# 微信公众号一键同步指南

## 快速开始

### 一键同步最新战报

```bash
npm run wechat
```

这个命令会自动:
1. ✅ 找到最新的战报文件
2. ✅ 生成微信公众号格式的HTML
3. ✅ 保存到 `output/` 目录
4. ✅ 自动复制基本信息到剪贴板
5. ✅ 在浏览器中打开预览

## 发布到微信公众号的步骤

### 1️⃣ 运行同步命令
```bash
npm run wechat
```

### 2️⃣ 在浏览器中查看预览
- 浏览器会自动打开生成的HTML文件
- 检查排版和内容是否正确

### 3️⃣ 复制HTML内容
- 在浏览器中按 `Ctrl + A` 全选
- 按 `Ctrl + C` 复制

### 4️⃣ 粘贴到公众号编辑器
- 登录微信公众平台
- 打开公众号文章编辑器
- 按 `Ctrl + V` 粘贴内容

### 5️⃣ 处理图片
- 在公众号编辑器中，图片会显示为本地文件名
- 需要手动上传图片到公众号素材库
- 替换图片链接为公众号的图片地址

### 6️⃣ 预览并发布
- 使用公众号的预览功能查看效果
- 确认无误后发布

## 与其他命令的配合

### 完整工作流程

```bash
# 1. 创建新战报
npm run new

# 2. 添加照片 (可选)
npm run add-photos

# 3. 一键同步到公众号
npm run wechat
```

### 手动选择特定战报

如果需要同步非最新的战报，使用:

```bash
npm run sync
```

然后从列表中选择要发布的比赛。

## 生成的文件

HTML文件保存在 `output/` 目录，文件名格式:
```
wechat-YYYY-MM-DD-对手名称.html
```

例如:
```
wechat-2026-01-09-内战.html
```

## 注意事项

1. **图片处理**: 公众号不支持本地图片，需要上传到公众号素材库
2. **图片格式**: 建议使用 JPG/PNG 格式，大小不超过 5MB
3. **排版检查**: 粘贴后检查是否有格式错乱
4. **链接处理**: 外部链接在公众号中可能失效，建议使用阅读原文

## 自定义样式

如果需要修改公众号文章样式，编辑:
```
scripts/wechat-auto.js
```

找到 `generateWechatArticle` 函数，修改HTML和CSS。

## 常见问题

**Q: 为什么图片在公众号中不显示?**
A: 公众号不支持本地图片链接，需要手动上传到素材库并替换链接。

**Q: 可以批量上传图片吗?**
A: 公众号编辑器支持批量上传，但需要手动操作。

**Q: 如何修改文章样式?**
A: 编辑 `scripts/wechat-auto.js` 中的样式定义。

**Q: 支持哪些格式?**
A: 支持标题、粗体、图片、链接等常见Markdown格式。
